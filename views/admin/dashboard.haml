// Admin dashboard

%section
	.page-header
		-unless admin == nil?
			.page-header
				%h1="Admin Dashboard"  
			%h3= "Admin"
		-else
			redirect '/'
	
%section
	%h1= "Users"
	.accordion{id: "userEventAccordion"}
		-users.each_with_index do |user, i|
			.accordion-group
				.accordion-heading
					%a.accordion-toggle{"data-toggle".to_sym => "collapse", href: "#userEventAccordionBody#{i}", "data-parent".to_sym => "#userEventAccordion"}= user.user_name
				.accordion-body.collapse{id: "userEventAccordionBody#{i}"}
					.accordion-inner
						%article
							-user.events.each do |event|
								%section
									%row
										%p= event.title
										%small= event.body
										.section{id: "comments-#{i}"}
										%small= "comments"
										%article
										-event.metadata.tumbler.comments.each_with_index do |comment, n|
											.section.well
												%small
													%u= comment.posted_by
													%p= comment.body
								.row-fluid
									%a.btn.btn-small{href: "#"}	
										%i.icon-trash
									%a.btn.btn-small{href: "#"}	
										%i.icon-flag

	
%section{styles: "word-wrap: break-word;"}
	%h1= "API Keys"
	%a.btn.btn-primary{href: "/api-key"}= "Create API Key"
	%br
	%br
	.accordion{id: "apiAccordion"}
		-api_keys.each_with_index do |key, i|
			.accordion-group
				.accordion-heading
					%a.accordion-toggle{"data-toggle".to_sym => "collapse", href: "#apiAccordionCollapse#{i}", "data-parent".to_sym => "#apiAccordion"}= key.email
				.accordion-body.collapse{id: "apiAccordionCollapse#{i}"}
					.accordion-inner
						%spane.label.label-info= key.api_key

%br
%br
%br
%br
%br
%br
%br
